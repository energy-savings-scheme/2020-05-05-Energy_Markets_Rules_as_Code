<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Rules as Code</h1>
					<h3>What it is, and what we've learned</h3>
					<p><small>Liam McCann</small></p>
					<p><span style="position: left; font-size:0.4em"><a href="https://energy-savings-scheme.github.io/2020-05-05-Energy_Markets_Rules_as_Code" target="_blank">https://energy-savings-scheme.github.io/2020-05-05-Energy_Markets_Rules_as_Code</a></span></p>
					<p>
				</section>
				<section>
					<h2> Contents </h2>
					<h4>What is Rules as Code?</h4>
					<h4>Some examples of Rules as Code</h4>
					<h4>What we've learned about the ESS</h4>
					<h4>What's next?</h4>
					<h4>Questions?</h4>					
				</section>
				<section>
					<section>
						<h2>What are we doing with Rules as Code?</h2>

					<ul>
						<li>Manually translating <em>prescriptive</em> rules into machine-readable computer code</li>
						<li>Testing our interpretation of the rules with clear, reproducible test data</li>
						<li>Publishing this translation, so computer systems can use it</li>
					</ul>
					</section>
					<section>
					<h2>Why Code The Rules?</h2>

					<p>Every computer system that interacts with rules, codes them</p>
					</section>
					<section>
					<h2>Let's do it once</h2>

					<p>So that everyone uses the same rules, with the same terms that mean the same things</p>
					</section>
					<section>
					<h2>And let's do it better</h2>

					<ul>
						<li>Computers read rules depending strictly on what is told to them - if a computer can read it, it's unambiguous<br>
						 </li>
						<li>Rules and computer systems become easier to integrate with, test, and modify - especially when they're built with coded rules in mind<br>
						 </li>
						<li>By reducing the burden of interpretation, we improve our customer's experience</li>
					</ul>
					</section>
					<section>
						<p>An example of something that could benefit from Rules as Code...</p>
							 <img width="40%" alt="Down arrow" data-lazy-loaded="" data-src="img/parking.jpg">
					</section>
					<section>
					<h2>The promise of Rules as Code is...</h2>

					<ul>
						<li>Help people understand the rules</li>
						<li>Enable further digital solutions</li>
						<li>Make compliance easier</li>
						<li>Ultimately, create further energy savings</li>
						
					</ul>
					</section>
					<section>
					<h3>Do you need Rules as Code?<br></h3>
					<img width="40%" alt="Down arrow" data-lazy-loaded="" data-src="img/policy_lab_need_rac.png"><br>
					<p><span style="position: left; font-size:0.3em">Sourced from: <a href="https://www.digital.nsw.gov.au/digital-transformation/policy-lab/rules-code" target="_blank">https://www.digital.nsw.gov.au/digital-transformation/policy-lab/rules-code</a></span></p>
					</section>
				</section>
					
					
				<section>
					<section>
					<h2>What isn't Rules as Code?</h2>
					<p class="fragment shrink" data-fragment-index="0">AI</p>
					<p class="fragment shrink" data-fragment-index="1">Machine Learning</p>
					<p class="fragment shrink" data-fragment-index="2">Law, equity, judgements, precedence</p>
					<p class="fragment shrink" data-fragment-index="3">RoboCops</p>
					<p class="fragment shrink" data-fragment-index="4">RoboJudges and RoboLawyers</p>
					<p class="fragment shrink" data-fragment-index="5">RoboDebt</p>
					<p class="fragment shrink" data-fragment-index="6">Replacing IPART or other compliance mechanisms</p>
					</section>
				</section>
				<section>
					<h2>Rules as Code is already happening</h2>
					<ul>
						<li>Better Rules Division - Community Gaming</li>
						<li>France - social benefits, tax reforms</li>
						<li>Senegal - taxation system in 36 hours</li>
					</ul>
					</section>
				<section>
					<section data-background-iframe="http://test.nsw.digital/active-kids.html" data-background-interactive>
						<div style="position: absolute; width: 40%; right: 0; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left;">
						<h2>What does it look like - a prototype?</h2>
						<p>This is a prototype that calculates Active Kids and Creative Kids grants for kids, using Rules as Code.</p>
						</div>
					</section>
					<section data-background-iframe="https://smartstart.services.govt.nz/financial-help" data-background-interactive="" data-id="50a8ecbe06e603bb19fd8721fe415237">
						<div style="position: absolute; width: 40%; right: 0; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left;">
						<h2>What does it look like - in practice?</h2>
						<p>This is a questionaire that can be used to determine what financial help you're eligible for in New Zealand, created using Rules As Code</p>
						</div>
					</section>
				</section>
				<section>
					<h2>DCS's Approach</h2>
					<p>DCS's aim is to make Rules as Code the easiest approach for drafting, consulting, implementing and communicating prescriptive rules and legislation.</p>
				</section>
				<section>
					<section>
						<h3>The big question for the ESS is...</h3>
						<p><span>How can we use Rules as Code to inform implementation of the Rule?</span></p>
						<p><span>(and how can we find this out?)</span></p>
					</section>
					<section>
						<h3>How we find this out is...</h3>
						<p>To code the ESS Rule!</p>
					</section>
					<section>
						<h3>What we've done so far is...</h3>
						<p span style="font-size:0.7em">Worked with DCS to learn how to build a Rules as Code coding environment.</p>
						<p span style="font-size:0.7em">Coded the NABERS method of the Rule (for Offices and Apartments).</p>
						<p span style="font-size:0.7em">Built test cases for the use of this method.</p>
						<p span style="font-size:0.7em">Reviewed the code with Legal.</p>						
					</section>
					<section>
						<h3>We've learned a lot from this process...</h3>
						<p><span>There's lots of insights that have emerged from this process.</span></p>
						<p><span>Here are two of them.</span></p>
					</section>
				</section>
				<section>
					<section>
					<h3>Rules as Code and Counted Energy Savings - 8.8.12 (a)</h3>
					<p>8.8.12 (a) reads as follows in the Rule.</p>
					
												 <img width="100%" alt="Down arrow" data-lazy-loaded="" data-src="img/section_8_8_12_a.png">
					
					</section>
					<section>
					<h3>Rules as Code and Counted Energy Savings - 8.8.12 (a)</h3>
					<p>So in code, this is represented like this.</p>
					<div class="sl-block" data-block-type="code" data-name="code-959d8b" data-block-id="1bb38e07d80eaf7f52d35cae3a180999" style="width: 1250px; height: 333px; left: 0px; top: 255.5px;"><div class="sl-block-content notranslate" data-highlight-theme="monokai" data-code-frame="none" style="z-index: 12;"><pre><code data-line-numbers="">
class counted_energy_savings(Variable):
	value_type = float
	entity = Building
	definition_period = ETERNITY
	label = 'The total Energy Savings for which ESCs have previously been'  \
	' created for the Implementation for the Current Rating Year.' \
	' As defined in Clause 8.8.12.'

	def formula(buildings, period, parameters):
		cg_savings = buildings('counted_gas_savings', period)
		ce_savings = buildings('counted_elec_savings', period)
		return count_elec_savings + count_gas_savings</code></pre></div></div>
					</section>
					<section>
						<h3>Rules as Code and Counted Energy Savings - Calculation Method 2 - step 4 of Method 4</h3>
						<p>Step 4 of Method 4 reads as follows in the Rule.</p>
						
												<img width="100%" alt="Down arrow" data-lazy-loaded="" data-src="img/calc_method_4_step_4.png">
					</section>
					<section>
					<h3>Counted Energy Savings - step 4 of Method 4</h3>
					<p>So in code, this is represented like this.</p>
<div class="sl-block" data-block-type="code" data-name="code-7babaf" data-block-id="777ceeaee69c35c6a6b16a587fce1b21" style="width: 1300px; height: 500px; left: 22.5px; top: 238px;"><div class="sl-block-content notranslate" data-highlight-theme="monokai" data-code-frame="none" style="z-index: 12;"><pre><code data-line-numbers="">class counted_energy_savings(Variable):
    value_type = float
    entity = Building
    definition_period = ETERNITY
    label = 'The total Energy Savings for which ESCs have previously been' \
            ' created for the Implementation for the Current Rating Year.' \
            ' As defined in Clause 8.8.12.'

    def formula(buildings, period, parameters):
        cg_savings = buildings('counted_gas_savings', period)
        ce_savings = buildings('counted_elec_savings', period)
        savings_calculated = buildings('type of savings, period')
        return select(
          [savings_calculated == 'elec', savings_calculated == 'gas'], 
		  [elec_savings, gas_savings]
          )</code></pre></div></div>
					</section>
					<section>
					<p> Here's the difference in meanings. <p>
												<img width="80%" alt="Down arrow" data-lazy-loaded="" data-src="img/counted_energy_ savings_definitions.jpg">
					</section>
				</section>
				
				<section>
					<section>
				<h3>What's so special about months?</h3>
					<p>A month is a common concept that appears everywhere in law and business.</p>
					<p>It appears in the ESS a few times, such as in 8.8.8:</p>
						<img width="100%" alt="Down arrow" data-lazy-loaded="" data-src="img/section_8_8_8.png">
					</section>
					<section>
					<p>But what exactly <em>is</em> a month?</p>
					<p>Let's see what the law says.</p>
					</section>
					<section data-background-iframe="https://www.legislation.nsw.gov.au/#/view/act/1987/15/part2/sec21" data-background-interactive>
						<div style="position: absolute; width: 20%; left: 0; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left;">
						<p>This is the definition of months in the Interpretations Act.</p>
					</section>
					<section>
						<h3> The legal interpretation of this definition. </h3>
						<p> So for (a), <p>
						<p><span style="position: left; font-size:0.5em">a month begins on 12:00:01am on 15 July, and ends on 11:59:59pm on 14 August. Next month begins at 12:00:01am on 15 August, etc.</p>
						<p> For (b), <p>
						<p><span style="position: left; font-size:0.5em">a month begins on 12:00:01am on 31 August, and ends on 11:59:59pm on 30 September. Next month begins at 12:00:01am on 1 October, ends 11:59:59pm on 31 October, etc.</p>
						<p> This functionality is difficult to replicate in code.</p>
					</section>
					<section>
						<h3> What we did with this information. </h3>
						<p> We built a function to replicate this functionality - which we did. </p>
						<p> There's an interesting finding we found, in codifying the strict legal interpretation of a common term and applying test cases to it. </p>
					</section>
					<section>
						<p> Here's a test case that looks at 8.8.8, specifically at leap years.<p>
						<img width="100%" alt="Down arrow" data-lazy-loaded="" data-src="img/months_example.jpg">	
					</section>
				</section>
				
				<section>
					<section>
					<h3>Benefits beyond making the code publicly available:</h3>
					<p><span>Establish hierarchy, structure and connections between terms used throughout the Rule</span></p>
					<p><span><em>to ensure consistency</em> in the meaning of these terms</span></p>
					</section>
					<section>
					<h3>Benefits beyond making the code publicly available:</h3>
					<p><span>Testing the interpretation of the rules with non-subject matter experts</span></p>
					<p><span><em>to ensure clarity</em> of interpretation across the different stakeholder groups</span></p>
					</section>
					<section>
					<h3>Benefits beyond making the code publicly available:</h3>
					<p><span>Test coding the written rules into machine-readable language</span></p>
					<p><span><em>to remove ambiguity</em> for when users do the same</span></p>
					</section>
					<section>
					<h2>We've found that coding the rules is the easy part.</h2>
					<p><span>But it’s only part of developing Better Rules.</span></p>
					</section>
					<section>
					<h3>Better Rules</h3>
					<p>The Better Rules framework provides a template for how we can do rule changes</p>
					<p><em>and</em></p>
					<p>Coding the rules will transform how the rules operate and are implemented.</p>
					</section>
					<section>
					<h3>The current rule change process is very linear.</h3>
					<p>Here's a simplified version of the current process.</p>
						<img width="100%" alt="Down arrow" data-lazy-loaded="" data-src="img/current_rule_change_process.jpg">
					</section>
					<section>
						<img width="85%" alt="Down arrow" data-lazy-loaded="" data-src="img/current_state_rules.png">
					<p><span style="position: left; font-size:0.3em"><a href="https://www.digital.govt.nz/dmsdocument/95-better-rules-for-government-discovery-report/html" target="_blank">https://www.digital.govt.nz/dmsdocument/95-better-rules-for-government-discovery-report/html</a></span></p>
					<p><span style="position: left; font-size:0.3em"><a href="https://trends.oecd-opsi.org/embracing-innovation-in-government-global-trends-2019.pdf" target="_blank">https://trends.oecd-opsi.org/embracing-innovation-in-government-global-trends-2019.pdf</a></span></p>
					</section>
					<section>
						<img width="85%" alt="Down arrow" data-lazy-loaded="" data-src="img/future_state_rules.png">
					<p><span style="position: left; font-size:0.3em"><a href="https://trends.oecd-opsi.org/embracing-innovation-in-government-global-trends-2019.pdf" target="_blank">https://trends.oecd-opsi.org/embracing-innovation-in-government-global-trends-2019.pdf</a></span></p>					
					</section>
					<section>
					<h3>The end goal is to use an integrated Better Rules approach to build a better end product.</h3>
						<img width="85%" alt="Down arrow" data-lazy-loaded="" data-src="img/better_rules_process.jpg">
					</section>
					<section>
					<h3>The key is integrating the perspectives and knowledge of <strong><em>different</em></strong> experts to ensure the rules deliver the best outcome for the user, following rule implementation.</h3>
					</section>
				</section>
				
				<section>
				<h3>What's next?<h3>
				<p span style="font-size:0.7em">First, we're developing a prototype for Rules as Code delivery</p>
				</section>
				<section>
				<h3>And then...<h3>
				<p span style="font-size:0.7em">Testing this prototype with NABERS stakeholders</p>
				<p span style="font-size:0.7em">Begin scaling this approach throughout the existing ESS Rule</p>
				<p span style="font-size:0.7em">Integrate the Better Rules approach into Safeguard development and delivery</p>
				</section>
				<section data-background-iframe="https://docs.google.com/forms/d/1cX3zDGrHP7uGSSL0QBlVgpnUCyg2qzTYAGuOI2Jq00Q/edit" data-background-interactive>
					<div style="position: absolute; width: 15%; left: 0; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 15px; text-align: left;">
					<p>Interested in working with us on delivering Rules as Code?</p>
					<p>Fill out this form, so we know you're interested - and we'll be in touch.</p>
				</section>
				<section>
				<h3>Thank you!<h3>
				<p span style="font-size:0.7em">We're open for any questions!</p>
				</section>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				hash: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/highlight/highlight.js' },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		</script>
	</body>
</html>
